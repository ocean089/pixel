
<!-- trimmed for demonstration; only showing corrected snippets -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>康樂國小 華容道 低年級版</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <!-- content omitted for brevity -->
    <script>
        function createLevelButtons() {
            levelSelector.innerHTML = '';
            for (let i = 1; i <= levels.length; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.classList.add('level-button');
                if (i === state.currentLevel) {
                    button.classList.add('current');
                } else if (state.completedLevels[i]) {
                    button.classList.add('completed');
                } else if (i > 1 && !state.completedLevels[i - 1] && i !== state.currentLevel) {
                    button.classList.add('locked');
                } else {
                    button.classList.add('bg-gray-200');
                }

                if (!button.classList.contains('locked')) {
                    button.addEventListener('click', () => loadLevel(i));
                }

                if (state.bestTimes[i] || state.bestMoves[i]) {
                    const tooltip = document.createElement('div');
                    tooltip.classList.add('level-stats');
                    if (state.bestMoves[i]) {
                        const movesItem = document.createElement('div');
                        movesItem.classList.add('level-stats-item');
                        movesItem.innerHTML = `<span class="level-stats-icon">👣</span>${state.bestMoves[i]}`;
                        tooltip.appendChild(movesItem);
                    }

                    if (state.bestTimes[i]) {
                        const timeItem = document.createElement('div');
                        timeItem.classList.add('level-stats-item');
                        timeItem.innerHTML = `<span class="level-stats-icon">⏱️</span>${formatTime(state.bestTimes[i])}`;
                        tooltip.appendChild(timeItem);
                    }

                    button.title = `最佳記錄: ${state.bestMoves[i] || '?'} 步, ${state.bestTimes[i] ? formatTime(state.bestTimes[i]) : '?'} 秒`;
                }

                levelSelector.appendChild(button);
            }
        }
    </script>
</body>
</html>
